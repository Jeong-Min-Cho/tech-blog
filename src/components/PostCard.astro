---
import { formatDate } from '@utils/formatDate';
import { getReadingTime } from '@utils/readingTime';

interface Props {
  title: string;
  description: string;
  pubDate: Date;
  slug: string;
  tags?: string[];
  body?: string;
}

const { title, description, pubDate, slug, tags = [], body = '' } = Astro.props;
const readingTime = getReadingTime(body);
---

<article class="py-6 border-b border-skin-line last:border-b-0">
  <a href={`/blog/${slug}`} class="group">
    <h2 class="text-lg font-medium text-skin-base group-hover:text-skin-accent">
      {title}
    </h2>
  </a>

  <p class="mt-2 text-skin-muted text-sm line-clamp-2">
    {description}
  </p>

  <div class="mt-3 flex flex-wrap items-center gap-x-4 gap-y-2 text-sm text-skin-muted">
    <time datetime={pubDate.toISOString()}>
      {formatDate(pubDate)}
    </time>
    <span>&middot;</span>
    <span>{readingTime}</span>
    {tags.length > 0 && (
      <>
        <span>&middot;</span>
        <div class="flex gap-2">
          {tags.slice(0, 3).map((tag) => (
            <a
              href={`/tags/${tag}`}
              class="text-skin-accent hover:underline underline-offset-2"
            >
              #{tag}
            </a>
          ))}
        </div>
      </>
    )}
  </div>
</article>
